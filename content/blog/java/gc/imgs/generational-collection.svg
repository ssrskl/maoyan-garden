<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 600">
  <defs>
    <linearGradient id="edenGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#a5d6a7;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#81c784;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="survivorGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#c8e6c9;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#a5d6a7;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="oldGrad2" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ffe0b2;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ffcc80;stop-opacity:1" />
    </linearGradient>
    <marker id="arrowGen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>
  
  <rect width="850" height="600" fill="#fafafa"/>
  <text x="425" y="35" text-anchor="middle" font-size="24" font-weight="bold" fill="#333">分代收集算法</text>
  <text x="425" y="60" text-anchor="middle" font-size="14" fill="#666">根据对象存活周期将堆划分为不同区域，采用不同回收策略</text>
  
  <!-- 新生代 -->
  <g transform="translate(50, 90)">
    <text x="175" y="0" text-anchor="middle" font-size="16" font-weight="bold" fill="#2e7d32">新生代（Young Generation）1/3</text>
    <text x="175" y="20" text-anchor="middle" font-size="12" fill="#666">存放新创建的对象，大部分对象朝生夕灭</text>
    
    <rect x="0" y="35" width="350" height="180" rx="5" fill="#e8f5e9" stroke="#4caf50" stroke-width="2"/>
    
    <!-- Eden -->
    <rect x="20" y="55" width="200" height="140" rx="5" fill="url(#edenGrad)" stroke="#43a047" stroke-width="2"/>
    <text x="120" y="85" text-anchor="middle" font-size="15" font-weight="bold" fill="#1b5e20">Eden 区</text>
    <text x="120" y="110" text-anchor="middle" font-size="13" fill="#2e7d32">新对象首先分配在这里</text>
    <text x="120" y="135" text-anchor="middle" font-size="13" fill="#2e7d32">占比：8/10</text>
    
    <!-- Survivor From -->
    <rect x="240" y="55" width="90" height="65" rx="5" fill="url(#survivorGrad)" stroke="#66bb6a" stroke-width="2"/>
    <text x="285" y="80" text-anchor="middle" font-size="13" font-weight="bold" fill="#1b5e20">From</text>
    <text x="285" y="100" text-anchor="middle" font-size="11" fill="#2e7d32">Survivor</text>
    <text x="285" y="115" text-anchor="middle" font-size="10" fill="#666">1/10</text>
    
    <!-- Survivor To -->
    <rect x="240" y="130" width="90" height="65" rx="5" fill="url(#survivorGrad)" stroke="#66bb6a" stroke-width="2"/>
    <text x="285" y="155" text-anchor="middle" font-size="13" font-weight="bold" fill="#1b5e20">To</text>
    <text x="285" y="175" text-anchor="middle" font-size="11" fill="#2e7d32">Survivor</text>
    <text x="285" y="190" text-anchor="middle" font-size="10" fill="#666">1/10</text>
  </g>
  
  <!-- 老年代 -->
  <g transform="translate(430, 90)">
    <text x="175" y="0" text-anchor="middle" font-size="16" font-weight="bold" fill="#e65100">老年代（Old Generation）2/3</text>
    <text x="175" y="20" text-anchor="middle" font-size="12" fill="#666">存放存活时间长的对象，回收频率低</text>
    
    <rect x="0" y="35" width="350" height="180" rx="5" fill="#fff3e0" stroke="#ff9800" stroke-width="2"/>
    
    <rect x="30" y="60" width="290" height="130" rx="5" fill="url(#oldGrad2)" stroke="#fb8c00" stroke-width="2"/>
    <text x="175" y="110" text-anchor="middle" font-size="15" font-weight="bold" fill="#e65100">Tenured 区</text>
    <text x="175" y="140" text-anchor="middle" font-size="13" fill="#ef6c00">存放多次 GC 后仍存活的对象</text>
    <text x="175" y="165" text-anchor="middle" font-size="13" fill="#ef6c00">或直接从 Eden 晋升的大对象</text>
  </g>
  
  <!-- 对象晋升过程 -->
  <g transform="translate(50, 300)">
    <text x="375" y="0" text-anchor="middle" font-size="16" font-weight="bold" fill="#1565c0">对象晋升过程</text>
    
    <rect x="0" y="20" width="750" height="130" rx="8" fill="#e3f2fd" stroke="#2196f3" stroke-width="1"/>
    
    <!-- 步骤1 -->
    <circle cx="60" cy="85" r="35" fill="#a5d6a7" stroke="#43a047" stroke-width="2"/>
    <text x="60" y="80" text-anchor="middle" font-size="12" font-weight="bold" fill="#1b5e20">新对象</text>
    <text x="60" y="95" text-anchor="middle" font-size="10" fill="#2e7d32">new Object()</text>
    
    <line x1="100" y1="85" x2="130" y2="85" stroke="#666" stroke-width="2" marker-end="url(#arrowGen)"/>
    
    <!-- 步骤2 -->
    <rect x="140" y="50" width="100" height="70" rx="5" fill="#81c784" stroke="#388e3c" stroke-width="2"/>
    <text x="190" y="75" text-anchor="middle" font-size="12" font-weight="bold" fill="#fff">Eden 区</text>
    <text x="190" y="95" text-anchor="middle" font-size="10" fill="#c8e6c9">Minor GC</text>
    
    <line x1="250" y1="85" x2="280" y2="85" stroke="#666" stroke-width="2" marker-end="url(#arrowGen)"/>
    
    <!-- 步骤3 -->
    <rect x="290" y="50" width="100" height="70" rx="5" fill="#66bb6a" stroke="#43a047" stroke-width="2"/>
    <text x="340" y="72" text-anchor="middle" font-size="11" font-weight="bold" fill="#fff">Survivor</text>
    <text x="340" y="88" text-anchor="middle" font-size="10" fill="#c8e6c9">From/To</text>
    <text x="340" y="105" text-anchor="middle" font-size="10" fill="#c8e6c9">复制算法</text>
    
    <!-- 年龄计数 -->
    <text x="390" y="40" text-anchor="middle" font-size="11" fill="#e65100">对象年龄计数器 +1</text>
    <line x1="380" y1="50" x2="350" y2="55" stroke="#e65100" stroke-width="1" stroke-dasharray="3,2"/>
    
    <line x1="400" y1="85" x2="430" y2="85" stroke="#666" stroke-width="2" marker-end="url(#arrowGen)"/>
    
    <!-- 步骤4 -->
    <rect x="440" y="50" width="120" height="70" rx="5" fill="#ffb74d" stroke="#f57c00" stroke-width="2"/>
    <text x="500" y="75" text-anchor="middle" font-size="12" font-weight="bold" fill="#e65100">老年代</text>
    <text x="500" y="95" text-anchor="middle" font-size="10" fill="#ef6c00">年龄 ≥ 15 (默认)</text>
    <text x="500" y="110" text-anchor="middle" font-size="10" fill="#ef6c00">或 Survivor 区满</text>
    
    <line x1="570" y1="85" x2="600" y2="85" stroke="#666" stroke-width="2" marker-end="url(#arrowGen)"/>
    
    <!-- 步骤5 -->
    <circle cx="660" cy="85" r="40" fill="#ffccbc" stroke="#ff7043" stroke-width="2"/>
    <text x="660" y="80" text-anchor="middle" font-size="12" font-weight="bold" fill="#d84315">Major GC</text>
    <text x="660" y="98" text-anchor="middle" font-size="10" fill="#e64a19">标记-清除/</text>
    <text x="660" y="112" text-anchor="middle" font-size="10" fill="#e64a19">标记-整理</text>
  </g>
  
  <!-- GC 类型说明 -->
  <g transform="translate(50, 460)">
    <text x="375" y="0" text-anchor="middle" font-size="16" font-weight="bold" fill="#6a1b9a">GC 类型对比</text>
    
    <rect x="0" y="15" width="750" height="120" rx="8" fill="#f3e5f5" stroke="#9c27b0" stroke-width="1"/>
    
    <!-- Minor GC -->
    <g transform="translate(20, 35)">
      <rect x="0" y="0" width="220" height="80" rx="5" fill="#fff" stroke="#81c784" stroke-width="1"/>
      <text x="110" y="25" text-anchor="middle" font-size="14" font-weight="bold" fill="#2e7d32">🌱 Minor GC / Young GC</text>
      <text x="110" y="50" text-anchor="middle" font-size="12" fill="#666">只回收新生代</text>
      <text x="110" y="70" text-anchor="middle" font-size="12" fill="#666">频率高，停顿短（几十ms）</text>
    </g>
    
    <!-- Major GC -->
    <g transform="translate(260, 35)">
      <rect x="0" y="0" width="220" height="80" rx="5" fill="#fff" stroke="#ffb74d" stroke-width="1"/>
      <text x="110" y="25" text-anchor="middle" font-size="14" font-weight="bold" fill="#e65100">🌳 Major GC / Old GC</text>
      <text x="110" y="50" text-anchor="middle" font-size="12" fill="#666">只回收老年代</text>
      <text x="110" y="70" text-anchor="middle" font-size="12" fill="#666">通常伴随 Full GC</text>
    </g>
    
    <!-- Full GC -->
    <g transform="translate(500, 35)">
      <rect x="0" y="0" width="230" height="80" rx="5" fill="#fff" stroke="#ef5350" stroke-width="1"/>
      <text x="115" y="25" text-anchor="middle" font-size="14" font-weight="bold" fill="#c62828">🌍 Full GC</text>
      <text x="115" y="50" text-anchor="middle" font-size="12" fill="#666">回收整个堆（Young + Old）</text>
      <text x="115" y="70" text-anchor="middle" font-size="12" fill="#c62828">停顿长，应避免频繁触发</text>
    </g>
  </g>
</svg>
